 <%@page import="java.sql.ResultSet"%>
<%@ page import="java.sql.PreparedStatement" %>
<%@page import="java.sql.Connection"%>
<%@ include file="/header.jsp" %>
 <%@ page import="org.cysecurity.cspf.jvl.model.DBConnect"%>
 <%@ page import="org.apache.commons.text.StringEscapeUtils"%>

 <%
 
 response.setHeader("X-Frame-Options", "DENY"); 
 response.setHeader("X-Content-Type-Options","nosniff");
 response.setHeader("Cache-Control","no-cache, no-store, must-revalidate");
 response.setHeader("Pragma" ,"no-cache");
 response.setHeader("X-XSS-Protection","1");
 
 Connection con=new DBConnect().connect(getServletContext().getRealPath("/WEB-INF/config.properties"));
         
   String postid=request.getParameter("postid");
  if(postid!=null)
   {
        //Statement stmt = con.createStatement();
        
        // the right way to build and execute SQL Statements
        PreparedStatement pstmt = con.prepareStatement("select * from posts where postid=?");
        pstmt.setString(1, postid);
        
        ResultSet rs =null;
              
        //rs=stmt.executeQuery("select * from posts where postid="+postid);
        rs = pstmt.executeQuery(); 
        if(rs != null && rs.next())
         {
       	String title = StringEscapeUtils.escapeHtml4(rs.getString("title"));
       	String user = StringEscapeUtils.escapeHtml4(rs.getString("user"));
       	String content = StringEscapeUtils.escapeHtml4(rs.getString("content"));
       	
           out.print("<b style='font-size:22px'>Title:"+title+"</b>"); 
           out.print("<br/>-  Posted By "+user); 
           out.print("<br/><br/>Content:<br/>"+content); 
         }
    }
    else
    {
        out.print("ID Parameter is Missing");
    }
     
    out.print("<br/><br/><a href='forum.jsp'>Return to Forum &gt;&gt;</a>"); 
  %>

 <%@ include file="/footer.jsp" %>